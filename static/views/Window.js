// Generated by CoffeeScript 1.6.3
var Bar, Tab, Window;

Bar = require('./Bar');

Tab = require('./Tab');

module.exports = Window = (function() {
  function Window() {}

  Window.init = function(o) {
    Window.x = 1;
    Window.y = 1;
    Window.resize();
    Window.status_bar = new Bar({
      x: Window.x,
      y: Window.h,
      w: Window.w,
      h: 1,
      bg: NviConfig.window_status_bar_bg,
      fg: NviConfig.window_status_bar_fg
    });
    Window.tabs = [
      new Tab({
        file: o != null ? o.file : void 0,
        x: Window.x,
        y: Window.y,
        w: Window.w,
        h: Window.ih,
        active: true
      })
    ];
  };

  Window.resize = function() {
    var tab, _i, _len, _ref;
    Logger.out("window caught resize " + process.stdout.columns + ", " + process.stdout.rows);
    Terminal.screen.w = process.stdout.columns;
    Terminal.screen.h = process.stdout.rows;
    if (Terminal.screen.w < 1 || Terminal.screen.h < 3) {
      return;
    }
    Window.w = Terminal.screen.w;
    Window.h = Terminal.screen.h;
    Window.ih = Window.h - 1;
    Window.iw = Window.w;
    Window.draw();
    if (Window.status_bar) {
      Window.status_bar.resize({
        y: Window.h,
        w: Window.w
      });
    }
    if (Window.tabs) {
      _ref = Window.tabs;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        tab = _ref[_i];
        tab.resize({
          w: Window.w,
          h: Window.ih
        });
      }
    }
  };

  Window.draw = function() {};

  Window.current_cursor = function() {
    var _ref, _ref1, _ref2;
    return (_ref = Window.active_tab) != null ? (_ref1 = _ref.active_view) != null ? (_ref2 = _ref1.cursors) != null ? _ref2[0] : void 0 : void 0 : void 0;
  };

  return Window;

})();
